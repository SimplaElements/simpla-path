<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>simpla-path</title>
    <script src="../../node_modules/web-component-tester/browser.js"></script>
    <script src="../../node_modules/test-fixture/test-fixture-mocha.js"></script>
    <link rel="import" href="../../node_modules/test-fixture/test-fixture.html">

    <!-- Import the element to test -->
    <link rel="import" href="../../simpla-paths.html">
    <script src="../../../webcomponentsjs/webcomponents.min.js"></script>
    <link rel="import" href="../../../polymer/polymer.html">
    <script>
      HTMLImports.whenReady(function() {
        Polymer({
          is: 'uid-tester',

          attached() {
            this.uidHistory = [];
          },

          set uid(value) {
            this.uidHistory = this.uidHistory || [];
            this.uidHistory.push(value);
          },

          get uid() {
            this.uidHistory = this.uidHistory || [];
            return this.uidHistory.slice(-1).pop();
          }
        })
      });
    </script>
  </head>
  <body>
    <test-fixture id="sid">
      <template>
        <div id="root">
          <div sid="main" expected-uid="main">
            <div>
              <header sid="header" expected-uid="main.header">
                <h1 sid="title" expected-uid="main.header.title"></h1>
              </header>
              <div sid="body" expected-uid="main.body">
                <div sid="content" expected-uid="main.body.content"></div>
              </div>
            </div>
          </div>
        </div>
      </template>
    </test-fixture>

    <test-fixture id="gid">
      <template>
        <div id="root">
          <div sid="main" expected-uid="main">
            <div gid="footer" expected-uid="footer">
              <p sid="description" expected-uid="footer.description"></p>
            </div>
          </div>
        </div>
      </template>
    </test-fixture>

    <test-fixture id="dynamic">
      <template>
        <div id="root"></div>
      </template>
    </test-fixture>

    <test-fixture id="uid-resolution">
      <template>
        <div id="root">
          <div sid="main">
            <div sid="body">
              <uid-tester sid="leaf" expected-uid="main.body.leaf"></uid-tester>
            </div>
          </div>
        </div>
      </template>
    </test-fixture>
    <script src="./index.js"></script>
  </body>
</html>
